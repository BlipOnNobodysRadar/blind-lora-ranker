/* ------------------------------------------------------------------
   1. Base Reset & Body
------------------------------------------------------------------ */
body {
  margin: 0;
  padding: 0;
  font-family: Arial, sans-serif;
  text-align: center;
  box-sizing: border-box;
  background: #f2f2f2; /* Slightly darker than white, for normal mode */
  color: #333;
  max-width: 100vw; /* Prevent horizontal scrolling if content overflows */
  padding-bottom: 40px; /* Add padding at the very bottom of the page */
  overflow-x:hidden;
}

/* ------------------------------------------------------------------
   2. Navigation Bar
------------------------------------------------------------------ */
.navigation {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  background: #e0e0e0;
  margin: 0; /* Ensure no gap at the very top */
}

.navigation a {
  margin: 5px 15px;
  font-weight: bold;
  text-decoration: none;
  color: #007acc;
}
.navigation a:hover {
  text-decoration: underline;
}

.navigation button {
  margin-left: 15px;
  padding: 6px 12px;
  background-color: #007acc;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}
.navigation button:hover {
  background-color: #005a99;
}

.navigation label {
  margin-left: 15px;
  cursor: pointer;
  color: #333; /* Will override in dark mode */
}

.navigation select {
  margin-left: 8px;
  padding: 6px;
  background-color: #fff;
  border: 1px solid #ccc;
  border-radius: 4px;
  cursor: pointer;
}
.navigation select:focus {
  outline: none;
  border-color: #007acc;
}

/* ------------------------------------------------------------------
   3. Progress Bar & Thresholds
------------------------------------------------------------------ */
.progress-container {
  position: relative;
  width: 80%;
  max-width: 600px;
  height: 20px;
  background: #eee;
  margin: 10px auto;
  border-radius: 5px;
  overflow: hidden;
  border: 1px solid #ccc;
}

/* Main progress bar that will show total width */
.progress-bar {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 0;
  transition: width 0.5s, background 0.5s;
  /* Add a purple right edge using a linear gradient */
  background-image: linear-gradient(to right, 
    transparent, 
    transparent 96%, 
    rgba(128, 0, 128, 1) 96%, 
    rgba(128, 0, 128, 1) 100%
  );
  background-size: 100% 100%;
  /* The base background color will be set by JavaScript */
  z-index: 1; /* Above sections but below label */
}

/* Section labels inside the progress bar */
.section-labels {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  pointer-events: none;
}

.section-label {
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 11px;
  font-weight: bold;
  color: rgba(255, 255, 255, 0.9);
  text-shadow: 0 0 2px rgba(0, 0, 0, 0.7);
  overflow: hidden;
  white-space: nowrap;
}

.section-not-reliable {
  width: 25%; /* 0-5/20 = 0-25% */
  background-color: rgba(204, 41, 41, 0.9); /* Darker red */
}

.section-minimum {
  width: 25%; /* 5-10/20 = 25-50% */
  background-color: rgba(204, 97, 0, 0.9); /* Darker orange */
}

.section-decent {
  width: 50%; /* 10-20/20 = 50-100% */
  background-color: rgba(204, 165, 0, 0.9); /* Darker yellow */
}

.section-good {
  /* This section is absolute positioned to avoid affecting layout */
  position: absolute;
  top: 0;
  right: 0;
  height: 100%;
  width: 25%; /* Fixed width */
  background-color: rgba(61, 140, 64, 0.9); /* Darker green */
  display: none; /* Hidden by default, shown via JS */
}

.progress-label {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: bold;
  pointer-events: none;
  color: #333;
  text-shadow: 0px 0px 2px rgba(255, 255, 255, 0.7);
  z-index: 2; /* Place on top of section labels */
}

.threshold {
  position: absolute;
  top: 0;
  width: 2px;
  height: 100%;
  background: black;
  z-index: 3; /* Place on top of everything */
}
.threshold-label {
  position: absolute;
  top: 100%;
  transform: translateX(-50%);
  font-size: 12px;
  white-space: nowrap;
}
.threshold-minimum { left: 25%; } /* 5/20 = 25% */
.threshold-decent  { left: 50%; } /* 10/20 = 50% */
.threshold-good    { left: 100%; }/* 20/20 = 100% */

/* ------------------------------------------------------------------
   4. Image Container & Wrappers
------------------------------------------------------------------ */
.image-container {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin: 10px auto;
  padding: 20px;
  background: #eaeaea;
  border-radius: 5px;
  max-width: 95vw;      /* Fill most of screen width, no strict px limit */
  justify-content: space-around;
  align-items: stretch;
  /* max-height:83vh; */
}

.image-wrapper {
  flex: 0 1 48%;        /* Two images side-by-side on larger screens */
  display: flex;
  flex-direction: column;
  align-items: center;
  background: #fff;
  border: 1px solid #ccc;
  padding: 7px;
  border-radius: 5px;
  box-sizing: border-box;
  overflow: hidden; /* Crucial to clip the zoomed image */
  position: relative; /* Needed for potential absolute positioning or z-index */
  max-height: 83vh;
  position:relative;
}

/* --- GENERALIZED Image Style (for hover base) --- */
/* Apply base styles needed for zoom to ALL relevant images */
.image-wrapper img {
  /* ... existing styles ... */
  max-height: 95%; /* Keep max-height for head-to-head */
  max-width: 100%;
  transform: scale(1);
  display: block; /* Prevents extra space below image */
  cursor: crosshair; /* Indicate zoom interaction */
  transform-origin: center center; /* Default origin */
  transform: scale(1); /* Start at normal size */
  transition: transform 0.15s ease-out; /* Smooth transition for scale */
  will-change: transform; /* Hint for browser optimization */
  pointer-events: auto;
}

/* Style when zoom is active (class added by JS) */
.image-wrapper img.zooming {
  /* No specific style needed here now, scale is set via inline style */
}

.image-wrapper:hover img {
  z-index: 10; /* Bring hovered image's wrapper content forward */
}

/* If "Scale Images" toggle is ON, fill container (even if it upscales) */
body.scale-images .image-wrapper img {
  width: 100%;
  max-width: 100%;
  height: auto;
  object-fit: contain;
}

.image-wrapper button {
  margin-top: 10px;
  padding: 6px 12px;
  background: #c00;
  color: #fff;
  border: none;
  border-radius: 3px;
  cursor: pointer;
}
.image-wrapper button:hover {
  background: #900;
}

/* ------------------------------------------------------------------
   5. Ranking & Summary Containers
------------------------------------------------------------------ */
/* Widen the main container for rankings */
.ranking-container {
  display: flex; /* Keep flex for column layout of items */
  flex-direction: column; /* Stack items vertically */
  align-items: center; /* Center items horizontally IF they don't take full width */
  width: 90%; /* Adjust width as desired */
  max-width: 1100px; /* Adjust max-width as desired */
  margin: 10px auto 20px auto; /* Center horizontally, add vertical margin */
}

/* Style individual LoRA ranking items using CSS Grid */
.ranking-item {
  display: grid;
  width: 100%; /* Make items take full width of the container */
  grid-template-columns: 1fr auto auto;
  grid-template-rows: auto auto;
  grid-template-areas:
    "name   rating  matches"
    "prog   prog    prog";
  gap: 4px 15px;
  align-items: center;
  margin: 8px 0;
  padding: 12px 15px;
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 5px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  box-sizing: border-box; /* Include padding/border in width */
}

/* ... (Keep span:nth-of-type(1) styling) ... */
.ranking-item span:nth-of-type(1) { /* LoRA Name Span */
  grid-area: name;
  text-align: left;
  font-weight: bold;
  word-break: break-all;
  overflow-wrap: break-word;
  line-height: 1.3;
}
.ranking-item span:nth-of-type(1) strong {
    font-weight: 600;
}


.ranking-item span:nth-of-type(2) { /* Rating Span */
  grid-area: rating;
  text-align: right;
  white-space: nowrap;
  font-size: 0.95em;
  color: #333; /* Default color */
}

.ranking-item span:nth-of-type(3) { /* Matches Span */
  grid-area: matches;
  text-align: right;
  white-space: nowrap;
  font-size: 0.95em;
  color: #555; /* Default color */
}

/* ... (Keep progress bar styling) ... */
.ranking-item .progress-bar-container {
  grid-area: prog;
  width: 100%;
  margin-top: 8px;
  position: relative;
  height: 10px;
  overflow: hidden;
  border: 1px solid #ccc;
  background: #f3f3f3;
  border-radius: 3px;
}
.ranking-item .progress-bar-container .progress-bar-background {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #e0e0e0;
}
.ranking-item .progress-bar-container .progress-bar {
    position: absolute; top: 0; left: 0; height: 100%; background: #4caf50; transition: width 0.3s ease;
}


/* Summary box */
.summary {
  width: 90%; /* Match container width */
  max-width: 1100px; /* Match container max-width */
  margin: 20px auto; /* Center horizontally */
  padding: 15px;
  background: #f9f9f9;
  border: 1px solid #ccc;
  border-radius: 5px;
  text-align: left;
}

/* ------------------------------------------------------------------
   6. Controls
------------------------------------------------------------------ */
.controls {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  width: 90%;
  max-width: 800px;
  margin: 10px auto;
  gap: 10px;
}

.controls input[type="text"] {
  width: 200px;
  padding: 5px;
  border: 1px solid #ddd;
  border-radius: 3px;
}

.controls button {
  padding: 5px 10px;
  border: 1px solid #007acc;
  background: #007acc;
  color: #fff;
  border-radius: 3px;
  cursor: pointer;
}
.controls button:hover {
  background: #005a99;
  border-color: #005a99;
}

/* ------------------------------------------------------------------
   7. Ranking Headers
------------------------------------------------------------------ */
.ranking-header {
  display: flex;
  justify-content: space-between; /* Distribute space */
  width: 90%; /* Match container width */
  max-width: 1100px; /* Match container max-width */
  margin: 15px auto 5px auto; /* Center horizontally, adjust vertical margin */
  padding: 0 15px; /* Add padding to align roughly with item content */
  box-sizing: border-box; /* Include padding in width */
  cursor: pointer;
  border-bottom: 2px solid #ccc; /* Add separator */
  padding-bottom: 5px;
}
.ranking-header span {
  /* Adjust flex basis for better alignment with grid columns */
  flex: 1 1 auto; /* Allow flexible shrinking/growing for name */
  text-align: left; /* Align header text left by default */
  font-weight: bold;
  padding: 5px 0;
}
/* Target specific headers for right alignment */
.ranking-header span[data-sort="rating"],
.ranking-header span[data-sort="matches"] {
  flex: 0 1 100px; /* Give fixed basis, allow shrinking */
  text-align: right; /* Align these headers right */
  margin-left: 15px; /* Add space from the name column */
}

.ranking-header span.sort-asc::after { content: " ▲"; font-size: 0.8em; }
.ranking-header span.sort-desc::after { content: " ▼"; font-size: 0.8em; }


/* ------------------------------------------------------------------
   8. Tables & Compare LoRA
------------------------------------------------------------------ */
.table-container {
  margin-top: 20px;
  margin: 20px auto;
  max-width: 90vw;
  overflow-x: auto;
}

table {
  width: 100%;
  min-width: 800px;
  border-collapse: collapse;
  background: #fff;
}
th, td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: center;
}
th {
  cursor: pointer;
  background-color: #f3f3f3;
}
th.sort-asc::after {
  content: " ▲";
}
th.sort-desc::after {
  content: " ▼";
}

.highlight-diff-positive {
  background-color: #e0ffe0;
}
.highlight-diff-negative {
  background-color: #ffe0e0;
}

/* ------------------------------------------------------------------
   9. Notifications
------------------------------------------------------------------ */
.notification {
  display: none;
  width: 80%;
  max-width: 600px;
  margin: 20px auto;
  padding: 10px;
  background-color: #fffae6;
  border: 1px solid #ffd700;
  border-radius: 4px;
}

/* ------------------------------------------------------------------
   10. Progress Bar Container (LoRA Rankings)
------------------------------------------------------------------ */
.progress-bar-container {
  position: relative;
  width: 100%;
  height: 25px;
  overflow: hidden;
  margin-top: 5px;
  border: 1px solid #ccc;
  background: #f3f3f3;
  border-radius: 5px;
}
.progress-bar-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #e0e0e0;
}
.progress-bar {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  background: #4caf50;
}

/* ------------------------------------------------------------------
   11. Dark Mode Overrides
------------------------------------------------------------------ */
body.dark-mode {
  background-color: #121212;
  color: #ccc;
}

/* Darken navigation in dark mode */
body.dark-mode .navigation {
  background-color: #333;
}

/* Darken nav links */
body.dark-mode .navigation a {
  color: #ccc;
}
body.dark-mode .navigation a:hover {
  text-decoration: underline;
}

/* Dark mode for the refresh button */
body.dark-mode .navigation button {
  background-color: #555;
  color: #ccc;
}
body.dark-mode .navigation button:hover {
  background-color: #777;
}

/* Dark mode for subset dropdowns */
body.dark-mode .navigation select {
  background-color: #555;
  color: #ccc;
  border: 1px solid #444;
}

/* Dark mode label text for the normal-subset-select or others */
body.dark-mode label[for="normal-subset-select"] {
  color: #ccc;
}

/* Dark mode label text for darkModeToggle specifically */
body.dark-mode label[for="darkModeToggle"] {
  color: #fff;
}

/* Dark mode for the image container */
body.dark-mode .image-container {
  background: #1e1e1e;
}

/* Dark mode for image wrappers */
body.dark-mode .image-wrapper {
  background: #2e2e2e;
  border: 1px solid #444;
}
body.dark-mode .image-wrapper img {
  border-color: #555;
}
body.dark-mode .image-wrapper button {
  background: #900;
}

/* Dark mode for ranking items */
body.dark-mode .ranking-item {
  background: #2e2e2e;
  border: 1px solid #444;
  box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

body.dark-mode .ranking-item span:nth-of-type(1) { /* Name */
  color: #ddd;
}
body.dark-mode .ranking-item span:nth-of-type(1) strong {
    color: #eee;
}

/* -->> IMPROVED DARK MODE CONTRAST <<-- */
body.dark-mode .ranking-item span:nth-of-type(2) { /* Rating */
  color: #ccc; /* Lighter gray */
}
body.dark-mode .ranking-item span:nth-of-type(3) { /* Matches */
  color: #bbb; /* Lighter gray */
}

body.dark-mode .ranking-item .progress-bar-container {
  border: 1px solid #555;
  background: #444;
}
body.dark-mode .ranking-item .progress-bar-container .progress-bar-background {
    background: #555;
}
body.dark-mode .ranking-item .progress-bar-container .progress-bar {
    background: #388e3c; /* Slightly darker green */
}

body.dark-mode .ranking-header {
  border-bottom-color: #555; /* Darker border */
}
body.dark-mode .ranking-header span {
  color: #ccc; /* Lighter header text */
}


/* Dark mode for tables */
body.dark-mode table {
  background-color: #1e1e1e;
}
body.dark-mode th {
  background-color: #333;
  color: #ccc;
}
body.dark-mode td {
  color: #ccc;
}

/* Dark mode for summary, notifications, etc. */
body.dark-mode .summary {
  background: #2e2e2e;
  border: 1px solid #444;
}
body.dark-mode .notification {
  background-color: #333;
  border-color: #666;
  color: #ccc;
}

/* ---------------------
Star rating section 
------------------------*/
/* frontend/styles.css */

/* ... (previous styles remain) ... */

/* Add this section or modify the existing one */
/* Seeding Gallery Styles */

/* Override .image-container for the gallery view */
#seeding-gallery #image-seeding-cards.image-container {
  flex-direction: row; /* Arrange images in rows */
  justify-content: center;
  align-items: flex-start; /* Align items to the top */
  gap: 20px;
  padding: 20px;
  background: none;
  border: none;
  max-width: 100vw;
  box-sizing: border-box;
  height: auto; /* Let height be determined by content */
  margin: 10px auto; /* Use standard margin like other containers */
}

/* Style individual image cards in the seeding gallery */
#seeding-gallery #image-seeding-cards .image-wrapper {
 /* Removed fixed flex-basis/width to allow more flexibility */
 flex: 1 1 30%; /* Allow growth (1), shrinking (1), minimum width (250px) */
 max-width: 45%; /* Maximum width per card */
 flex-direction: column; /* Stack image, name, stars */
 align-items: center;
 background: #fff; /* White background for cards */
 border: 1px solid #ccc;
 padding: 10px;
 border-radius: 5px;
 box-sizing: border-box;
 text-align: center;
 overflow: hidden;
 height: auto;
}

body.dark-mode #seeding-gallery #image-seeding-cards .image-wrapper {
 background: #2e2e2e; /* Dark mode background */
 border: 1px solid #444;
}


#seeding-gallery #image-seeding-cards .image-wrapper img {
 width: 100%; /* Image fills the width of its parent wrapper */
 max-width: 100%; /* Ensure it doesn't exceed parent width */
 height: auto; /* Maintain aspect ratio */
 max-height: 60vh;
 object-fit: contain;
 border: 1px solid #ddd;
 border-radius: 3px;
 margin-bottom: 5px; /* Space below image */
 /* Remove the JS style override for max-width */
}

body.dark-mode #seeding-gallery #image-seeding-cards .image-wrapper img {
 border-color: #555;
}

#seeding-gallery #image-seeding-cards .image-wrapper p {
 /* Style for the image name */
  margin-top: 5px;
  margin-bottom: 5px;
  word-break: break-word; /* Allow breaking long words */
  overflow-wrap: break-word; /* Alias for word-break */
  font-size: 0.9em;
  color: #555; /* Default name color */
}
body.dark-mode #seeding-gallery #image-seeding-cards .image-wrapper p {
 color: #bbb; /* Dark mode name color */
}


/* Star Rating Styles (Refined for Containment and Centering) */
#seeding-gallery #image-seeding-cards .star-rating {
 direction: rtl; /* Make stars appear left-to-right visually */
 display: inline-block; /* Or block, combined with text-align center */
 font-size: 25px; /* Adjust size as needed */
 margin-top: 5px;
 /* Ensure rating container has width/centering */
 width: 100%; /* Take full width of parent wrapper */
 text-align: center; /* Center the inline-block stars */
  white-space: nowrap; /* Prevent stars from wrapping */
  overflow: hidden; /* Hide any overflow */
  margin-bottom: 0; /* Remove bottom margin */
}

.star-rating input {
 display: none; /* Hide radio buttons */
}

.star-rating label {
 color: #888; /* Default star color */
 cursor: pointer;
 padding: 0 2px; /* Keep padding between stars */
  transition: color 0.2s ease; /* Smooth color transition */
}

/* Style for hover state and selected stars */
.star-rating input:checked ~ label,
.star-rating label:hover,
.star-rating label:hover ~ label {
 color: gold; /* Highlight color */
}

/* Reset hover for the checked star and those after it */
.star-rating input:checked + label:hover,
.star-rating input:checked ~ label:hover,
.star-rating input:checked ~ label:hover ~ label,
.star-rating label:hover ~ input:checked ~ label {
 color: gold; /* Keep highlight */
}

/* Specific style for the currently selected star and those before it */
.star-rating input:checked ~ label {
 color: gold;
}

/* Dark mode overrides for stars */
body.dark-mode .star-rating label {
  color: #555; /* Default star color in dark mode */
}
body.dark-mode .star-rating input:checked ~ label,
body.dark-mode .star-rating label:hover,
body.dark-mode .star-rating label:hover ~ label {
 color: #ffeb3b; /* Yellowish highlight in dark mode */
}


/* Hide delete button in seeding view */
#seeding-gallery #image-seeding-cards .image-wrapper button {
  display: none;
}


/* Add these new styles to styles.css */

.confirm-button-container {
  text-align: center; /* Center the button inside the container */
  margin-top: 20px;    /* Space above the button container */
  margin-bottom: 20px; /* Space below the button container */
}

/* Update the button style to use the class selector */
.confirm-seeding-button {
  /* Copy existing styles from #confirm-seeding */
  padding: 10px 20px;
  font-size: 1.1em;
  background-color: #4CAF50; /* Green */
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.confirm-seeding-button:hover:not(:disabled) {
  /* Copy existing styles */
  background-color: #45a049;
}

.confirm-seeding-button:disabled {
  /* Copy existing styles */
  background-color: #ccc;
  cursor: not-allowed;
}

/* Dark mode overrides for the new class */
body.dark-mode .confirm-seeding-button:not(:disabled) {
  background-color: #3f51b5; /* Indigo */
}
body.dark-mode .confirm-seeding-button:hover:not(:disabled) {
  background-color: #303f9f; /* Darker Indigo */
}
body.dark-mode .confirm-seeding-button:disabled {
  background-color: #555;
}

/* Optional: Adjust margin specifically for the top/bottom if needed */
#confirm-container-top {
    margin-bottom: 15px; /* Slightly less margin below top button */
}
#confirm-container-bottom {
    margin-top: 15px; /* Slightly less margin above bottom button */
}

/* Dark mode for seeding elements */
body.dark-mode #confirm-seeding:not(:disabled) {
  background-color: #3f51b5; /* Indigo */
}
body.dark-mode #confirm-seeding:hover:not(:disabled) {
  background-color: #303f9f; /* Darker Indigo */
}
body.dark-mode #confirm-seeding:disabled {
  background-color: #555;
}

#seeding-message {
 margin-top: 10px;
 font-weight: bold;
}

/* Style for the image inside the seeding gallery card */
#seeding-gallery #image-seeding-cards .image-wrapper img {
  /* Existing styles */
  width: 100%;
  max-width: 100%;
  height: auto;
  object-fit: contain;
  border: 1px solid #ddd;
  border-radius: 3px;
  margin-bottom: 5px;

  /* Add transition for smoother zoom effect */
  transition: transform 0.2s ease-out; /* Transition scale and origin */
  transform-origin: center center; /* Default origin */

  /* Ensure the image is display: block to avoid extra space below it */
  display: block;
  cursor: crosshair; /* Change cursor to indicate zoomability */
}


/* Optional: styles for the image name and stars to ensure they stay below */
#seeding-gallery .image-wrapper p,
#seeding-gallery .image-wrapper .star-rating,
#seeding-gallery .image-wrapper button {
   position: relative; /* Keep stacking context */
   z-index: 11; /* Stay above potentially overlapping zoomed image background */
   /* Prevent text selection during zoom interaction */
   user-select: none;
   -webkit-user-select: none;
   -moz-user-select: none;
   -ms-user-select: none;
}
